Authentic Trade Example & Approval Flow
Trade Parameters
Scenario: Senior trader books a large power forward trade

Template Details (ID=3):

Template Name: "Head Trader Power Q1"
Instrument: PWR-Q1-25 (Power Forward Q1 2025)
Commodity: POWER
Unit: MWh
Currency: EUR
Default Quantity: 5000 MWh
Default Price: 55.00 EUR/MWh
Auto-Approval Allowed: false
MTM Approval Threshold: 1,000,000 EUR
Trade Valuation:

Notional Value: 15,000 MWh × 65.50 EUR = 982,500 EUR
MTM (Mark-to-Market): 1,150,000 EUR
Delta: 15,000
Gamma: 0 (forward has no gamma)
Vega: 0 (no volatility exposure)
Approval Rules Configuration
Rule 1: High Value Trade Approval
Matches: ✅ quantity (15000) > 1000

Rule 2: Very High Value Multi-Level
Matches: ✅ quantity (15000) > 10000

Rule Selection:
System picks Rule 2 (higher priority = 2 vs 1)

Approval Flow Timeline
Step 1: Trade Booking
User: pallavi_trade (Role: TRADER)
Time: 2026-01-03 10:30:00
Action: POST /api/templates/3/book

System Response:

Database State:

Notification Sent:

To: All users with role SENIOR_TRADER
Message: "Trade TRD-2026-0103-001 requires your approval (Level 1 of 3)"
Step 2: Level 1 Approval
User: john_senior (Role: SENIOR_TRADER)
Time: 2026-01-03 11:15:00 (45 minutes later)
Action: POST /api/trades/TRD-2026-0103-001/approve

Request Headers:

Request Body:

System Processing:

Validates john_senior has role SENIOR_TRADER ✅
Checks trade is at level 1 with pending role SENIOR_TRADER ✅
Looks up Rule 2 routing for next level
Finds Level 2: HEAD_TRADER
Updates trade:
current_approval_level = 2
pending_approval_role = HEAD_TRADER
status remains PENDING_APPROVAL
System Response:

Notification Sent:

To: All users with role HEAD_TRADER
Message: "Trade TRD-2026-0103-001 requires your approval (Level 2 of 3)"
Step 3: Level 2 Approval
User: sarah_head_trader (Role: HEAD_TRADER)
Time: 2026-01-03 14:30:00 (3 hours 15 minutes later)
Action: POST /api/trades/TRD-2026-0103-001/approve

Request Body:

System Processing:

Validates sarah_head_trader has role HEAD_TRADER ✅
Checks trade is at level 2 with pending role HEAD_TRADER ✅
Looks up Rule 2 routing for next level
Finds Level 3: CFO (final level)
Updates trade:
current_approval_level = 3
pending_approval_role = CFO
status remains PENDING_APPROVAL
System Response:

Notification Sent:

To: All users with role CFO
Message: "Trade TRD-2026-0103-001 requires your FINAL approval (Level 3 of 3)"
Subject: "HIGH VALUE TRADE - Final Approval Required"
Step 4: Final Approval (Level 3)
User: michael_cfo (Role: CFO)
Time: 2026-01-03 16:45:00 (2 hours 15 minutes later)
Action: POST /api/trades/TRD-2026-0103-001/approve

Request Body:

System Processing:

Validates michael_cfo has role CFO ✅
Checks trade is at level 3 with pending role CFO ✅
Looks up Rule 2 routing for next level
No Level 4 found - this is the final approval!
Updates trade:
status = APPROVED
current_approval_level = NULL
pending_approval_role = NULL
approved_at = 2026-01-03T16:45:00
approved_by = michael_cfo
System Response:

Notifications Sent:

To: pallavi_trade (original trader)
"Your trade TRD-2026-0103-001 has been FULLY APPROVED"
To: All approvers (john_senior, sarah_head_trader, michael_cfo)
"Trade TRD-2026-0103-001 is now confirmed and active"
To: Risk team
"New approved trade: €1.15M MTM added to POWER_TRADING_DESK"
Final Trade State
Result:

